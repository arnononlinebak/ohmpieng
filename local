server {
    listen 8080;
    server_name 127.0.0.1;
    root /Users/non/ohmpieng/workspace;
    access_log /Users/non/ohmpieng/logs/default.access.log main;

    location / {
        include conf.d/php-fpm;
    }

    location = /info {
        allow 127.0.0.1;
        deny all;
        rewrite (.*) /.info.php;
    }
    location /config { deny all; }
    location /logic { deny all; }
    location /non { deny all; }
    location /www { deny all; }
    location /production { deny all; }
}

server {
    listen 8080;
    server_name get.page365.local;
    root /Users/non/softbaked/page365-landing/;
    access_log /Users/non/ohmpieng/logs/page365.net.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
    }
}

server {
    listen 8080;
    server_name get.nonmadden.local;
    root /Users/non/ohmpieng/non/;
    access_log /Users/non/ohmpieng/logs/nonmadden.com.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
        try_files $uri $uri/ /index.php;
    }

    location ~* \.(ico|css|js|gif|jpe?g|png)(\?[0-9]+)?$ {
        expires max;
        log_not_found off;
    }
}

server {
    listen 8080;
    server_name ohmpieng.local www.ohmpieng.local;
    root /Users/non/ohmpieng/production/;
    access_log /Users/non/ohmpieng/logs/ohmpieng.org.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
    }
}

server {
    listen 8080;
    server_name apps.ohmpieng.local;
    root /Users/non/ohmpieng/www/applications/;
    client_max_body_size 100M;
    access_log /Users/non/ohmpieng/logs/apps.ohmpieng.org.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
    }
}

server {
    listen 8080;
    server_name developers.ohmpieng.local;
    root /Users/non/ohmpieng/www/developers/;
    access_log /Users/non/ohmpieng/logs/developers.ohmpieng.org.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
    }
}

server {
    listen 8080;
    server_name cloud.ohmpieng.local;
    root /Users/non/ohmpieng/www/cloud/;
    access_log /Users/non/ohmpieng/logs/cloud.ohmpieng.org.access.log main;

    location / {
        include conf.d/php-fpm;
        autoindex on;
    }
}

server {
  listen 443 ssl;
  server_name project;
  root /Users/non/ohmpieng/project/;
  index index.html index.php;
  include conf.d/php-fpm;
  access_log /Users/non/ohmpieng/logs/ohmpieng.org.access.log combined;

  location / {
    try_files $uri $uri/ /index.php;
  }

  location /blog {
    try_files $uri $uri/ /blog/index.php?$args;
  }

  location = /favicon.ico {
    log_not_found off;
    access_log off;
  }

  location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
  }

  location ~* \.(ico|css|js|gif|jpe?g|png)(\?[0-9]+)?$ {
    expires max;
    log_not_found off;
  }

  ssl_certificate      /usr/local/etc/nginx/ssl/localhost.crt;
  ssl_certificate_key  /usr/local/etc/nginx/ssl/localhost.key;
}
